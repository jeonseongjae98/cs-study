https://sunrise-min.tistory.com/entry/TLS-Handshake%EB%8A%94-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%A7%84%ED%96%89%EB%90%98%EB%8A%94%EA%B0%80


https://github.com/SSAFY-SEOUL-19-ALGO/cs-study/blob/main/Contents/Network/DEEP%20DIVE%20-%20HTTPS%EC%99%80%20TLS%20%232.%20TLS%20%ED%95%B8%EB%93%9C%EC%89%90%EC%9D%B4%ED%81%AC.md



## TLS(Transport Layer Security)λ€?
- μΈν„°λ„· μƒμ μ»¤λ®¤λ‹μΌ€μ΄μ…μ—μ„ κ°μΈ μ •λ³΄μ™€ λ°μ΄ν„° λ³΄μ•μ„ μ„ν•΄ μ„¤κ³„λμ–΄ λ„λ¦¬ μ±„νƒλ λ³΄μ• ν”„λ΅ν† μ½μ΄λ‹¤.
- μ£Όμ” μ‚¬μ© μ‚¬λ΅€λ” μ›Ή λΈλΌμ°μ €(μ›Ή μ‘μ© ν”„λ΅κ·Έλ¨)μ™€ μ„λ²„ κ°„μ ν†µμ‹  λ°μ΄ν„°λ¥Ό μ•”νΈν™”ν•λ” κ²ƒμ΄λ‹¤. κ·Έ μ™Έμ—λ„ μ΄λ©”μΌ, λ©”μ‹μ§€, λ³΄μ΄μ¤μ¤λ²„ IP(VoIP)λ“± μ—¬λ¬ ν†µμ‹  λ°μ΄ν„°λ¥Ό μ•”νΈν™”ν•λ‹¤.
- TLSλ” Netscapeκ°€ κ°λ°ν• SSL(Secure Sockets Layer)μ΄λΌλ” μ΄μ „μ μ•”νΈν™” ν”„λ΅ν† μ½μ—μ„ λ°μ „ν• κ²ƒμ΄λ‹¤.
- HTTPSλ” HTTP ν”„λ΅ν† μ½ μƒμ„μ—μ„ TLS μ•”νΈν™”λ¥Ό κµ¬ν„ν• κ²ƒμ΄λ‹¤. HTTPSλ¥Ό μ‚¬μ©ν•λ” μ›Ή μ‚¬μ΄νΈλ” TLS μ•”νΈν™”λ¥Ό μ‚¬μ©ν•λ‹¤.
- TLS : 4κ³„μΈµ Transport Layer

## TLSκ°€ ν•λ” κ²ƒ?
- μ•”νΈν™” : μ 3μλ΅λ¶€ν„° μ „μ†΅λλ” λ°μ΄ν„°λ¥Ό μ¨κΈ΄λ‹¤.
- μΈμ¦ : μ •λ³΄λ¥Ό κµν™ν•λ” λ‹Ήμ‚¬μκ°€ μ”μ²­λ λ‹Ήμ‚¬μμ„μ„ λ³΄μ¥ν•λ‹¤.
- λ¬΄κ²°μ„± : λ°μ΄ν„°κ°€ μ„μ΅°λκ±°λ‚ λ³€μ΅°λμ§€ μ•μ•λ”μ§€ ν™•μΈν•λ‹¤.

## TLS Handshake
- TLSλ” μ•μ „ν• μΈν„°λ„· ν†µμ‹ μ„ μ„ν• μ•”νΈν™” λ° μΈμ¦ ν”„λ΅ν† μ½μ…λ‹λ‹¤.
- TLS ν•Έλ“μ…°μ΄ν¬λ” TLS μ•”νΈν™”λ¥Ό μ‚¬μ©ν•λ” ν†µμ‹  μ„Έμ…μ„ μ‹¤ν–‰ν•λ” ν”„λ΅μ„Έμ¤μ…λ‹λ‹¤. TLS ν•Έλ“μ…°μ΄ν¬ μ¤‘μ—, ν†µμ‹ ν•λ” μ–‘μΈ΅μ—μ„λ” λ©”μ‹μ§€λ¥Ό κµν™ν•μ—¬ μ„λ΅λ¥Ό μΈμ‹ν•κ³  μ„λ΅λ¥Ό κ²€μ¦ν•λ©° μ‚¬μ©ν•  μ•”νΈν™” μ•κ³ λ¦¬μ¦μ„ κµ¬μ„±ν•κ³  μ„Έμ… ν‚¤μ— ν•©μν•©λ‹λ‹¤. TLS ν•Έλ“μ…°μ΄ν¬λ” HTTPS μ‘λ™ μ›λ¦¬μ κ·Όκ°„μ„ μ΄λ£Ήλ‹λ‹¤.
- TLS μ—°κ²°μ€ TLS Handshakeλ¥Ό μ‚¬μ©ν•λ‹¤. μ‚¬μ©μκ°€ TLSλ¥Ό μ‚¬μ©ν•λ” μ›Ήμ‚¬μ΄νΈλ¥Ό μ ‘μ†ν•λ©΄ ν΄λΌμ΄μ–ΈνΈμ™€ μ›Ή μ„λ²„κ°„μ— TLS Handshakeκ°€ μ‹μ‘λλ‹¤.
- ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„μ μΈμ¦μ„λ¥Ό λ°›μ•„ μ„λ²„μ λ¬΄κ²°μ„±μ„ ν™•μΈν•κ³  μ‹ λΆ°ν•  μ μλ” μ„λ²„λΌλ©΄, μ•”νΈν™” ν†µμ‹ μ— μ‚¬μ©ν•  λ€μΉ­ν‚¤λ¥Ό μ„λ²„μ κ³µκ°ν‚¤λ΅ μ•”νΈν™” ν•μ—¬ μ „λ‹¬ν•λ‹¤.
- μ—¬κΈ°μ„ λ°μ΄ν„°λ¥Ό μ£Όκ³  λ°›κΈ° μ „, μ„λ²„μ λ¬΄κ²°μ„±μ„ ν™•μΈν•κ³  λ€μΉ­ν‚¤λ¥Ό μ „λ‹¬ν•λ” κ³Όμ • β†’ **TLS Handshake**

 

### TLS Handshakeλ¥Ό ν•λ” λ™μ• ν΄λΌμ΄μ–ΈνΈμ™€ μ›Ή μ„λ²„λ” μ•„λ μΌμ„ μν–‰ν•λ‹¤.
- μ‚¬μ©ν•  TLS λ²„μ „ μ§€μ •
- μ‚¬μ©ν•  μ•”νΈ μ ν’κµ° κ²°μ • - κ³µμ λ μ•”νΈν™” ν‚¤ λλ” μ„Έμ… ν‚¤μ™€ κ°™μ€ μ„Έλ¶€ μ •λ³΄λ¥Ό λ…μ‹ν•λ” μ•κ³ λ¦¬μ¦ μ§‘ν•©
- μ„λ²„μ TLS μΈμ¦μ„λ¥Ό μ‚¬μ©ν•μ—¬ μ„λ²„μ μ‹ μ›μ„ μΈμ¦
- Handshakeκ°€ μ™„λ£λ ν›„ λ©”μ‹μ§€λ¥Ό μ•”νΈν™”ν•κΈ° μ„ν• μ„Έμ… ν‚¤ μƒμ„±
    - κ³µκ°ν‚¤ μ•”νΈν™” λ°©μ‹μ„ μ‚¬μ©ν•μ—¬ TLSλ” μ„Έμ… ν‚¤λ¥Ό μ„¤μ •ν•  μ μλ‹¤.
        β†’ ν΄λΌμ΄μ–ΈνΈλ” μƒμ„±λ λ€μΉ­ν‚¤λ¥Ό μ„λ²„μ κ³µκ°ν‚¤λ΅ μ•”νΈν™”ν•λ‹¤
    - Handshakeλ” μΈμ¦λ„ μ²λ¦¬ν•λ”λ° μ΄λ” κ³µκ° ν‚¤λ¥Ό μ‚¬μ©ν•μ—¬ μν–‰λλ‹¤.

- π“– κ³µκ°ν‚¤λ” λ‹¨λ°©ν–¥ μ•”νΈν™”λ¥Ό μ‚¬μ©ν•λ” μ•”νΈν™” ν‚¤λ΅, κ³µκ° ν‚¤λ¥Ό κ°€μ§„ λ„κµ¬λ‚ μ‹ λΆ°μ„±μ„ λ³΄μ¥ν•κΈ° μ„ν•΄ μ„λ²„μ κ°μΈ ν‚¤λ΅ μ•”νΈν™”λ λ°μ΄ν„°λ¥Ό ν•΄λ…ν•  μ μμμ„ μλ―Έν•μ§€λ§ μ›λ λ°μ‹ μλ§ κ°μΈ ν‚¤λ¥Ό μ΄μ©ν•΄ λ°μ΄ν„°λ¥Ό μ•”νΈν™”ν•  μ μλ‹¤.
- μ„λ²„μ κ³µκ°ν‚¤λ” TLS μΈμ¦μ„μ μΌλ¶€μ΄λ‹¤.
- λ°μ΄ν„° μ•”νΈν™”μ™€ μΈμ¦μ΄ μ§„ν–‰λλ©΄ λ©”μ‹μ§€ μΈμ¦ μ½”λ“(MAC)μ™€ ν•¨κ» μ„λ…λλ‹¤. μμ‹ μλ” λ°μ΄ν„°μ λ¬΄κ²°μ„±μ„ λ³΄μ¥ν•κΈ° μ„ν•΄ MACμ„ ν™•μΈν•  μ μλ‹¤.

[![1.png](https://i.postimg.cc/tJRJN0g7/1.png)](https://postimg.cc/cgjddbwN)

# TLS Handshake μ§„ν–‰ κ³Όμ •


## 1. Client : Client Hello
- ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ—μ„ Client Hello λ©”μ‹μ§€ μ „μ†΅
ν¨ν‚· λ‚΄μ—λ” TLS Version, Clientκ°€ μ§€μ›ν•λ” μ•”νΈν™” λ°©μ‹, Client Random Data(ν΄λΌμ΄μ–ΈνΈμ—μ„ μƒμ„±ν• λ‚μλ΅ λ€μΉ­ν‚¤λ¥Ό λ§λ“¤ λ• μ‚¬μ©), Session ID, SNI(μ„λ²„λ…) κ°€ ν¬ν•¨λλ‹¤.

- Session ID
: λ§¤λ² μ—°κ²°ν•  λ•λ§λ‹¤ Handshake κ³Όμ •μ„ μ§„ν–‰ν•λ” κ²ƒμ€ λΉ„ν¨μ¨μ μ΄λ‹ μµμ΄ ν•λ² μ „μ²΄ Handshake κ³Όμ •μ„ μ§„ν–‰ν•κ³  Session IDλ¥Ό κ°€μ§„λ‹¤. ν›„μ—λ” μ΄ Session IDλ¥Ό μ‚¬μ©ν•΄μ„ μ„ κ³Όμ •μ„ λ°λ³µν•΄μ„ μ§„ν–‰ν•μ§€ μ•λ”λ‹¤.


- μµμ΄ Handshakeμ—μ„  SessionIDκ°€ 0μ΄μ§€λ§ Handshakeλ¥Ό ν•λ² μ§„ν–‰ν•λ©΄ μ„λ²„λ΅λ¶€ν„° Session IDλ¥Ό λ°›λ”λ‹¤.
- ν΄λΌμ΄μ–ΈνΈλ” λ΅μ»¬μ— μ €μ¥ν•΄λ‘κ³  λ‹¤μ‹ μ„λ²„μ™€ Handshakeκ³Όμ •μ„ λ§Ίμ„ μΌμ΄ μλ‹¤λ©΄ Session IDλ¥Ό ν¬ν•¨ν• ν¨ν‚·μ„ μ „μ†΅ν•λ‹¤.
- μ„λ²„μ—μ„λ” μ „λ‹¬λ°›μ€ Session IDκ°€ μ•„μ§ μ ν¨ν•λ‹¤λ©΄ λ™μΌν• Session IDλ¥Ό λ‹¤μ‹ μ „μ†΅ν•λ‹¤.
- μ΄ κ³Όμ •μ—μ„ μµμ΄ Handshakeλ¥Ό μ„ν•΄ μ§„ν–‰ν• μ‘μ—…λ“¤μ„ ν•μ§€ μ•κΈ° λ•λ¬Έμ— μ‹κ°„μ΄ μ μ•½λλ‹¤.

## 2. Server Hello, Server Certificate, Server Hello Done
- Server : Server Hello
ν΄λΌμ΄μ–ΈνΈκ°€ λ³΄λ‚Έ Client Helloμ— λ€ν• μ„λ²„μ μ‘λ‹µμ΄λ‹¤. TLS Version, μ•”νΈν™” λ°©μ‹(Clientκ°€ λ³΄λ‚Έ μ•”νΈν™” λ°©μ‹ μ¤‘μ— μ„λ²„κ°€ μ‚¬μ© κ°€λ¥ν• μ•”νΈν™” λ°©μ‹μ„ μ„ νƒ), Server Random Data(μ„λ²„μ—μ„ μƒμ„±ν• λ‚μ, λ€μΉ­ν‚¤λ¥Ό λ§λ“¤ λ• μ‚¬μ©), SessionID(μ ν¨ν• Session ID)

- Server : Server Certificate
μ„λ²„μ μΈμ¦μ„λ¥Ό ν΄λΌμ΄μ–ΈνΈμ—κ² λ³΄λ‚΄λ” λ‹¨κ³„λ΅ ν•„μ”μ— λ”°λΌ CAμ Certificateλ„ ν•¨κ» μ „μ†΅ν•λ‹¤.
    - ν΄λΌμ΄μ–ΈνΈλ” μ΄ ν¨ν‚·μ„ ν†µν•΄ μ„λ²„μ μΈμ¦μ„κ°€ λ¬΄κ²°ν•μ§€ κ²€μ¦ν•λ‹¤.

 - Server :  Server Hello Done
μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈμ—κ² λ³΄λ‚Ό λ©”μ‹μ§€λ¥Ό λ¨λ‘ λ³΄λƒλ‹¤λ” λ»

## Client Key Exchange, Change Cipher Spec, Finished
- Client : **Client Key Exchange**
μΈμ¦μ„κ°€ λ¬΄κ²°ν•μ§€ κ²€μ¦ λμ—μΌλ©΄ ν΄λΌμ΄μ–ΈνΈμ λ‚μμ™€ μ„λ²„μ λ‚μλ¥Ό μ΅°ν•©ν•μ—¬ λ€μΉ­ν‚¤λ¥Ό μƒμ„±ν•λ‹¤.
- κ·Έλ¦¬κ³  λ€μΉ­ν‚¤λ¥Ό μ„λ²„μ κ³µκ°ν‚¤λ΅ μ•”νΈν™”ν•λ‹¤.
- μ•”νΈν™”ν• μ •λ³΄λ¥Ό μ„λ²„μ—κ² μ „μ†΅ν•λ‹¤.
- μ •λ¦¬λ¥Ό ν•μλ©΄, ν‚¤ κµν™μ— ν•„μ”ν• μ •λ³΄λ¥Ό μ„λ²„μ— μ κ³µν•λ‹¤. μ΄ μ •λ³΄λ¥Ό pre-master secretμ΄λΌκ³  ν•λ©° λ€μΉ­ν‚¤μ— μ‚¬μ©λλ” κ²ƒμΌλ΅ μ λ€ λ…Έμ¶μ΄ λμ–΄μ„λ” μ•λλ‹¤. pre-master secretμ€ λ‚μλ¥Ό μ΅°ν•©ν•μ—¬ μƒμ„±ν• κ²ƒμ΄λ‹¤.
- μ΄ κ°’μ„ μ„λ²„μ κ³µκ°ν‚¤λ΅ μ•”νΈν™”ν•΄μ„ μ „μ†΅ν•λ©΄ μ„λ²„λ” κ°μΈν‚¤λ΅ λ³µνΈν™”κ°€ κ°€λ¥ν•λ‹¤. κ·Έλ ‡κ² λλ©΄ μ„λ΅κ°€ pre-master secretμ„ κ³µμ ν•κ² λλ‹¤. μ΄ κ°’μ„ μ‚¬μ©ν•΄μ„ μ„Έμ…μ— μ‚¬μ©λ  ν‚¤λ¥Ό μƒμ„±ν•κ² λλ”λ°, μ΄ ν‚¤κ°€ λ°”λ΅ λ€μΉ­ν‚¤μ΄λ‹¤.
- **Server & Client** : Change Cipher Spec
μ΄μ λ¶€ν„° μ „μ†΅λλ” λ¨λ“  ν¨ν‚·μ€ ν‘μƒλ μ•κ³ λ¦¬μ¦κ³Ό ν‚¤λ¥Ό μ΄μ©ν•μ—¬ μ•”νΈν™” ν•κ² λ‹¤κ³  μ•λ¦¬λ” λ©”μ‹μ§€
- **Server & Client** : Finished
TLS Handshakeλ¥Ό μ„±κ³µμ μΌλ΅ λ§μΉκ³  μΆ…λ£

# Session keys and TLS handshakes
- TLS ν”„λ΅ν† μ½μ€ λΉ„λ€μΉ­/κ³µκ° ν‚¤μ™€ λ€μΉ­ μ•”νΈν™”λ¥Ό λ¨λ‘ μ‚¬μ©ν•λ©°, κ° ν†µμ‹  μ„Έμ…μ— λ€ν•΄ λ€μΉ­ μ•”νΈν™”λ¥Ό μ„ν• μƒλ΅μ΄ ν‚¤λ¥Ό μƒμ„±ν•΄μ•Ό ν•λ‹¤. μ΄λ¬ν• ν‚¤λ¥Ό **"μ„Έμ… ν‚¤"** λΌκ³  ν•λ‹¤.

## μ„Έμ… ν‚¤λ€ λ¬΄μ—‡μΈκ°€?
- μ„Έμ… ν‚¤λ” TLS ν•Έλ“μ…°μ΄ν¬κ°€ μ™„λ£λ ν›„μ— TLSλ¥Ό ν†µν• ν†µμ‹  μ–‘μΈ΅μ—μ„ μ‚¬μ©ν•λ” λ€μΉ­ ν‚¤μ΄λ‹¤.
- μ–‘μΈ΅μ΄ μ„Έμ… ν‚¤μ— λ€ν•΄ ν•©μν•κ³  λ‚λ©΄ λ” μ΄μƒ κ³µκ°ν‚¤μ™€ κ°μΈν‚¤λ¥Ό μ‚¬μ©ν•  ν•„μ”κ°€ μ—†μΌλ©°, TLSλ” κ°κ°μ κ³ μ  μ„Έμ…μ— λ€ν•΄ μ„λ΅ λ‹¤λ¥Έ μ„Έμ… ν‚¤λ¥Ό μƒμ„±ν•λ‹¤.
- μ„Έμ… ν‚¤λ” ν•λ‚μ ν†µμ‹  μ„Έμ…μ„ μ•”νΈν™”ν•λ” λ° μ‚¬μ©λλ” λ€μΉ­ μ•”νΈν™” ν‚¤μ΄λ‹¤. λ‹¤μ‹ λ§ν•΄, λ‘ λ‹Ήμ‚¬μ κ°„μ— μ „μ†΅λλ” λ°μ΄ν„°λ¥Ό μ•”νΈν™”ν•κ³  ν•΄λ…ν•λ” λ° ν• λ²λ§ μ‚¬μ©λλ”(ν• μ„Έμ… νƒ€μ„μ΄ λλ‚  λ•κΉμ§€) μ„μ‹ ν‚¤μ΄λ‹¤. λ‘ λ‹Ήμ‚¬μ κ°„μ μ΄ν›„ λ€ν™”λ” μ„λ΅ λ‹¤λ¥Έ μ„Έμ… ν‚¤λ΅ μ•”νΈν™”λλ‹¤. μ„Έμ… ν‚¤λ” μ‚¬μ©μκ°€ λ΅κ·ΈμΈν•  λ•λ§λ‹¤ μ¬μ„¤μ •λλ” μ•”νΈμ™€ κ°™λ‹¤.
- TLSμ—μ„, λ‘ ν†µμ‹  λ‹Ήμ‚¬μ(ν΄λΌμ΄μ–ΈνΈ λ° μ„λ²„)λ” TLS ν•Έλ“μ…°μ΄ν¬κ°€ μ§„ν–‰λλ” λ™μ• ν†µμ‹  μ„Έμ…μ„ μ‹μ‘ν•  λ• μ„Έμ… ν‚¤λ¥Ό μƒμ„±ν•λ‹¤. TLSμ— λ€ν• κ³µμ‹ RFCλ” μ‹¤μ λ΅ μ΄λ¬ν• ν‚¤λ¥Ό "μ„Έμ… ν‚¤"λΌκ³  λ¶€λ¥΄μ§€λ” μ•μ§€λ§ κΈ°λ¥μ μΌλ΅λ” μ„Έμ… ν‚¤μ™€ κ°™λ‹¤.

## μ„Έμ…μ΄λ€ λ¬΄μ—‡μΈκ°€?
- μ„Έμ…μ€ λ³Έμ§μ μΌλ΅ λ‘ λ‹Ήμ‚¬μ μ‚¬μ΄μ λ‹¨μΌ λ€ν™”μ΄λ‹¤. μ„Έμ…μ€ λ„¤νΈμ›ν¬λ¥Ό ν†µν•΄ μ΄λ£¨μ–΄μ§€λ©° λ‘ μ¥μΉκ°€ μ„λ΅λ¥Ό μΈμ‹ν•κ³  κ°€μƒ μ—°κ²°μ„ μ—΄ λ• μ‹μ‘λ©λ‹λ‹¤. λ‘ κΈ°κΈ°κ°€ μ„λ΅ ν•„μ”ν• μ •λ³΄λ¥Ό μ…μν•΄(ν†µμ‹ μ„ μ™„λ£ν•κ³ ) 'λ‹«κΈ°_μ•λ¦Ό' λ©”μ‹μ§€λ¥Ό λ³΄λ‚΄λ©΄μ„ λ§μΉ λ‘ μ‚¬λμ΄ λ¬Έμλ¥Ό μ£Όκ³ λ°›λ” κ²ƒμ²λΌ μ—°κ²°μ„ μΆ…λ£ν•κ³  "λ‚μ¤‘μ— ν†µν™”ν•μ"κ³  λ§ν•λ©° λ€ν™”λ¥Ό λ‹«λ”λ‹¤. λ‘ μ‚¬λμ΄ λ¬Έμ λ©”μ‹μ§€λ¥Ό λ³΄λ‚΄κ³  λ‹¨μν μ„λ΅μ—κ² μ‘λ‹µν•μ§€ μ•λ” κ²ƒκ³Ό κ°™μ΄ λΉ„ν™μ„±μΌλ΅ μΈν•΄ μ—°κ²°μ΄ μ‹κ°„ μ΄κ³Όλ  μλ„ μλ‹¤.

[![1.png](https://i.postimg.cc/hGKTnf5y/1.png)](https://postimg.cc/jDkLQdKP)

- μ„Έμ…μ€ μ„¤μ •λ κΈ°κ°„μΌ μλ„ μκ³ , λ‘ λ‹Ήμ‚¬μκ°€ ν†µμ‹ ν•λ” λ™μ• μ§€μ†λ  μλ„ μλ‹¤. TLS μ•”νΈν™”μ λ§¥λ½μ—μ„ λ‘ μ¥μΉλ” μ •λ³΄λ¥Ό κµν™ν•κ³  μƒ μ„Έμ… ν‚¤λ¥Ό μƒμ„±ν•μ—¬ μ—°κ²°μ„ λ‹¤μ‹ μ—΄μ–΄μ•Ό ν•λ‹¤.


## μ•”νΈν™” ν‚¤(Cryptographic key)λ€ λ¬΄μ—‡μΈκ°€?
- μ•”νΈν™”μ—μ„λ” μ•”νΈν™” μ•κ³ λ¦¬μ¦μ νΉμ μ…λ ¥μ„ μ°Έμ΅°ν•κΈ° μ„ν•΄ ν‚¤(μΌλ°μ μΌλ΅ μ§§μ€ λ°μ΄ν„° μ΅°κ°)μ— λ€ν•΄ μ΄μ•ΌκΈ°ν•λ” κ²ƒμ΄ μΌλ°μ μ΄λ‹¤. κ°€μ¥ μΌλ°μ μΈ ν‚¤λ” λ°μ΄ν„° μ•”νΈν™”μ— μ‚¬μ©λλ” ν‚¤μ΄λ‹¤. κ·Έλ¬λ‚ λ‹¤λ¥Έ λ©μ μ„ μ„ν•΄ λ‹¤λ¥Έ μ ν•μ ν‚¤κ°€ μ΅΄μ¬ν•λ‹¤.
- λ°μ΄ν„° μ•”νΈν™” μ•κ³ λ¦¬μ¦μ€ (λΉ„λ°€) ν‚¤λ¥Ό μ‚¬μ©ν•μ—¬ λ©”μ‹μ§€λ¥Ό μ•”νΈλ¬Έ, μ¦‰ μ¤ν¬λ¨λΈ”λμ–΄ μ½μ„ μ μ—†λ” λ©”μ‹μ§€ λ²„μ „μΌλ΅ λ³€ν™ν•©λ‹λ‹¤. μ•”νΈ ν•΄λ… ν‚¤λ¥Ό μ‚¬μ©ν•μ—¬ μ•”νΈλ¬Έμ—μ„ μ›λ³Έ λ©”μ‹μ§€λ¥Ό λ³µκµ¬ν•  μ μλ‹¤.
- λ€μΉ­ μ•”νΈν™” μ•κ³ λ¦¬μ¦μ—μ„λ” μ•”νΈν™” ν‚¤μ™€ μ•”νΈ ν•΄λ… ν‚¤κ°€ λ¨λ‘ λ™μΌν•©λ‹λ‹¤. λ”°λΌμ„ λΉ„λ°€ ν‚¤λ¥Ό λ³΄μ ν• μ‚¬λμ€ λ„κµ¬λ‚ λ°μ΄ν„°λ¥Ό μ•”νΈν™” λ° ν•΄λ…ν•  μ μμΌλ©° μ΄κ²ƒμ΄ λ€μΉ­ ν‚¤λΌλ” μ©μ–΄κ°€ μμ£Ό μ‚¬μ©λλ” μ΄μ μ΄λ‹¤.
- λ°λ€λ΅, κ³µκ° ν‚¤ μ•”νΈν™”λΌκ³ λ„ ν•λ” λΉ„λ€μΉ­ μ•”νΈν™” μ•κ³ λ¦¬μ¦μ—λ” λ‘ κ°μ ν‚¤κ°€ μλ‹¤. ν•λ‚λ” κ³µκ°μ΄κ³  λ°μ΄ν„° μ•”νΈν™”μ—λ§ μ‚¬μ©ν•  μ μλ” λ°λ©΄ λ‹¤λ¥Έ ν•λ‚λ” λΉ„κ³µκ°λ΅ μ μ§€λμ–΄ μ•”νΈλ¬Έ ν•΄λ…μ—λ§ μ‚¬μ©λλ‹¤.

 ## HTTPSλ” λ€μΉ­(symmetric) λλ” λΉ„λ€μΉ­ μ•”νΈν™”(asymmetric cryptography)λ¥Ό μ‚¬μ©ν•λ”κ°€?
- TLS ν”„λ΅ν† μ½κ³Ό κ²°ν•©λ HTTPμΈ HTTPSλ” λ‘ κ°€μ§€ μ ν•μ μ•”νΈν™”λ¥Ό λ¨λ‘ μ‚¬μ©ν•λ‹¤. TLSλ¥Ό ν†µν• λ¨λ“  ν†µμ‹ μ€ TLS ν•Έλ“μ…°μ΄ν¬λ΅ μ‹μ‘λ©λ‹λ‹¤. λΉ„λ€μΉ­ μ•”νΈν™”λ” TLS ν•Έλ“μ…°μ΄ν¬κ°€ μ‘λ™ν•λ„λ΅ ν•λ” λ° μ¤‘μ”ν• μ”μ†μ΄λ‹¤.
- TLS ν•Έλ“μ…°μ΄ν¬κ°€ μ§„ν–‰λλ” λ™μ• λ‘ κ°μ ν†µμ‹  μ¥μΉκ°€ μ„Έμ… ν‚¤λ¥Ό μ„¤μ •ν•κ³  μ„Έμ…μ λ‚λ¨Έμ§€ λ¶€λ¶„μ—μ„ λ€μΉ­ μ•”νΈν™”μ— μ‚¬μ©λλ‹¤(μ¥μΉκ°€ μ„Έμ… μ¤‘μ— ν‚¤λ¥Ό μ—…λ°μ΄νΈν•λ„λ΅ μ„ νƒν•μ§€ μ•λ” ν•). μΌλ°μ μΌλ΅ λ‘ ν†µμ‹  μ¥μΉλ” ν΄λΌμ΄μ–ΈνΈ λλ” λ©ν†±μ΄λ‚ μ¤λ§νΈν°κ³Ό κ°™μ€ μ‚¬μ©μ μ¥μΉμ™€ μ›Ή μ‚¬μ΄νΈλ¥Ό νΈμ¤ν…ν•λ” μ›Ή μ„λ²„μΈ μ„λ²„μ΄λ‹¤.
- TLS ν•Έλ“μ…°μ΄ν¬μ—μ„ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„λ” λ‹¤μμ„ μν–‰ν•λ‹¤.
    - μ‚¬μ©ν•  μ•”νΈν™” μ•κ³ λ¦¬μ¦ ν‘μƒ(λΉ„λ€μΉ­ μ•”νΈν™”λ¥Ό ν†µν•΄ μ•μ „ν•κ² μν–‰)
    - TLS μΈμ¦μ„μ— λ€ν•΄ μ„λ²„ ID μΈμ¦(λΉ„λ€μΉ­ μ•”νΈν™” μ‚¬μ©)


### μ°Έκ³ )  λΉ„λ€μΉ­ μ•”νΈν™”(κ³µκ°ν‚¤ μ•”νΈν™”)
λ€μΉ­ν‚¤ μ•”νΈλ” μ†΅μ‹ μμ™€ μμ‹ μκ°€ ν•λ‚μ ν‚¤λ¥Ό κ³µμ ν•΄μ„ μ‚¬μ©ν•λ‹¤.
μ΄λ¬ν• λ€μΉ­ν‚¤μ—λ” λ‘ κ°€μ§€ λ¬Έμ μ μ΄ μλ‹¤.

1) μµμ΄μ— λΉ„λ°€ν‚¤λ¥Ό μ•μ „ν•κ² μ£Όκ³  λ°›λ” κ²ƒμ΄ μ–΄λ µλ‹¤.
2) λ„λ¬΄ λ§μ€ ν‚¤κ°€ ν•„μ”ν•λ‹¤. (nλ…μ΄ ν†µμ‹  ν•  κ²½μ° n(n-1)/2 κ°μ ν‚¤ ν•„μ”)

μ΄λ¥Ό ν•΄κ²°ν•κΈ° μ„ν•΄ λΉ„λ€μΉ­ μ•”νΈν™”(=κ³µκ°ν‚¤ μ•”νΈν™”) λ°©μ‹μ„ μ‚¬μ©ν•λ‹¤.

** λΉ„λ€μΉ­ μ•”νΈν™”(asymmetric cryptography) = κ³µκ°ν‚¤ μ•”νΈν™” λ°©μ‹
[![1.png](https://i.postimg.cc/5y5QDJmd/1.png)](https://postimg.cc/BP6v1dyM)


- λΉ„λ€μΉ­ μ•”νΈν™” λ°©μ‹μ€ public keyλ΅ μ•”νΈν™”λ¥Ό ν•κ³  λ°›λ” μ½μ—μ„ private keyλ΅ λ³µνΈν™”λ¥Ό ν•λ” λ°©μ‹μ΄λ‹¤.
- λ€μΉ­ μ•”νΈν™” λ°©μ‹μ€ λ§μ€ ν‚¤κ°€ ν•„μ”ν•μ§€λ§ λΉ„λ€μΉ­ μ•”νΈν™” λ°©μ‹μ€ κ³µκ°ν‚¤μ™€ λΉ„λ°€ν‚¤λ§ κ΄€λ¦¬ν•λ©΄ λλ‹¤.
- μ¦‰, Bobμ΄ Aliceμ—κ² λ©”μ‹μ§€λ¥Ό λ³΄λ‚Όλ• Aliceμ public keyλ΅ μ•”νΈν™”λ¥Ό ν•λ©΄ Aliceλ” λ³ΈμΈμ Private keyλ΅ λ³µνΈν™”λ¥Ό ν•λ‹¤.

 

#### λΉ„λ€μΉ­ μ•”νΈν™” λ°©μ‹μ λ‹¨μ 
- λ€μΉ­ν‚¤ μ•”νΈν™”μ— λΉ„ν•΄ μ†λ„κ°€ λλ¦¬λ‹¤. 
    - κ·Έλμ„ λΉ„λ€μΉ­ μ•”νΈν™”(κ³µκ°ν‚¤ μ•”νΈν™”)λ” μ£Όλ΅ λ€μΉ­ν‚¤ μ•”νΈ ν†µμ‹ μ„ μ„ν• ν‚¤μμ„ λ§λ“¤ λ• μ‚¬μ©ν•λ‹¤.
- μ¦‰! ν†µμ‹ μ€ λ€μΉ­ν‚¤ μ•”νΈν™”λ΅ λΉ λ¥΄κ² ν•μ§€λ§, ν‚¤λ¥Ό μ²μμ— κµν™ν•  λ• κ³µκ°ν‚¤ μ•”νΈλ¥Ό μ‚¬μ©ν•λ” κ²ƒμ΄λ‹¤.
    - μ΄ λ• λ§λ“¤μ–΄μ§€λ” λ€μΉ­ν‚¤μ μμ„ μ„Έμ…ν‚¤(Session key)λΌκ³  ν•λ‹¤.
